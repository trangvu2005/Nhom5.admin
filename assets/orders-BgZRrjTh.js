import{m as i}from"./vendor-ui-DjYv-mAO.js";document.addEventListener("alpine:init",()=>{i.data("orderTable",()=>({orders:[],filteredOrders:[],selectedOrders:[],currentPage:1,itemsPerPage:10,searchQuery:"",statusFilter:"",dateFilter:"",sortField:"orderNumber",sortDirection:"desc",isLoading:!1,chartsInitialized:!1,stats:{total:0,pending:0,shipped:0,revenue:0},statusStats:[],init(){this.loadSampleData(),this.filterOrders(),this.calculateStats(),setTimeout(()=>{this.initCharts()},500)},loadSampleData(){this.orders=[{id:1,orderNumber:"VE-UEH-001",customer:{name:"Nguyễn Văn An",email:"an.nguyen@st.ueh.edu.vn"},items:[{name:"AI Trong Doanh Nghiệp - Workshop",quantity:1,price:0}],itemCount:1,total:0,status:"delivered",orderDate:"2025-10-15",shippingAddress:"B1.204, UEH Cơ sở B"},{id:2,orderNumber:"VE-UEH-002",customer:{name:"Lê Thị Bình",email:"binh.le@st.ueh.edu.vn"},items:[{name:"Storytelling Thời AI - Webinar",quantity:1,price:0}],itemCount:1,total:0,status:"pending",orderDate:"2025-09-05",shippingAddress:"Trực tuyến qua Zoom"},{id:3,orderNumber:"VE-UEH-003",customer:{name:"Trần Minh Chiến",email:"chien.tran@st.ueh.edu.vn"},items:[{name:"Cuộc thi HORIZON 2025",quantity:1,price:1e4}],itemCount:1,total:1e4,status:"processing",orderDate:"2025-09-23",shippingAddress:"Online/Cơ sở UEH"},{id:4,orderNumber:"VE-UEH-004",customer:{name:"Phạm Thu Dung",email:"dung.pham@st.ueh.edu.vn"},items:[{name:"Cuộc thi DNA - EPIC CONTEST",quantity:2,price:1e4}],itemCount:2,total:2e4,status:"shipped",orderDate:"2025-09-20",shippingAddress:"UEH Quiz/Cơ sở B"},{id:5,orderNumber:"VE-UEH-005",customer:{name:"Hoàng Minh Đức",email:"duc.hoang@st.ueh.edu.vn"},items:[{name:"Lễ Hội Nối Vòng Tay Lớn 2025",quantity:1,price:0}],itemCount:1,total:0,status:"cancelled",orderDate:"2025-10-08",shippingAddress:"Hội trường A.116"},{id:6,orderNumber:"VE-UEH-006",customer:{name:"Đặng Thúy Hạnh",email:"hanh.dang@st.ueh.edu.vn"},items:[{name:"Workshop Quản Lý Dự Án Chuyển Đổi Số",quantity:1,price:0}],itemCount:1,total:0,status:"processing",orderDate:"2024-11-20",shippingAddress:"UEH Cơ sở B"},{id:7,orderNumber:"VE-UEH-007",customer:{name:"Bùi Anh Khoa",email:"khoa.bui@st.ueh.edu.vn"},items:[{name:"UEH CINEBOX - Sài Gòn, Anh Yêu Em",quantity:2,price:15e3}],itemCount:2,total:3e4,status:"pending",orderDate:"2025-10-05",shippingAddress:"Hội trường B1.302"},{id:8,orderNumber:"VE-UEH-008",customer:{name:"Vũ Diệu Linh",email:"linh.vu@st.ueh.edu.vn"},items:[{name:"Talkshow Green Business Showcase",quantity:1,price:0}],itemCount:1,total:0,status:"shipped",orderDate:"2025-08-25",shippingAddress:"B1.302"},{id:9,orderNumber:"VE-UEH-009",customer:{name:"Ngô Quốc Nam",email:"nam.ngo@st.ueh.edu.vn"},items:[{name:"Du Lịch Và Cuộc Sống - LUMINARIS",quantity:1,price:0}],itemCount:1,total:0,status:"delivered",orderDate:"2025-11-28",shippingAddress:"Hội trường A.116"},{id:10,orderNumber:"VE-UEH-010",customer:{name:"Lý Kim Oanh",email:"oanh.ly@st.ueh.edu.vn"},items:[{name:"Talkshow An Toàn Tình Dục - CUDDLE",quantity:1,price:0}],itemCount:1,total:0,status:"processing",orderDate:"2025-12-14",shippingAddress:"B1.205"},{id:11,orderNumber:"VE-UEH-011",customer:{name:"Đỗ Tiến Phát",email:"phat.do@st.ueh.edu.vn"},items:[{name:"Talkshow Cyber Security - PIN",quantity:1,price:0}],itemCount:1,total:0,status:"pending",orderDate:"2025-11-12",shippingAddress:"Trực tuyến"},{id:12,orderNumber:"VE-UEH-012",customer:{name:"Trương Mỹ Quyên",email:"quyen.truong@st.ueh.edu.vn"},items:[{name:"Workshop Nâng Hạng TTCK Việt Nam",quantity:1,price:0}],itemCount:1,total:0,status:"shipped",orderDate:"2025-09-25",shippingAddress:"B1.302"},{id:13,orderNumber:"VE-UEH-013",customer:{name:"Mai Thế Sơn",email:"son.mai@st.ueh.edu.vn"},items:[{name:"Zeeniverse By U - Cuộc Thi Mascot",quantity:1,price:0}],itemCount:1,total:0,status:"delivered",orderDate:"2025-11-10",shippingAddress:"Online UEH"},{id:14,orderNumber:"VE-UEH-014",customer:{name:"Tô Ngọc Tú",email:"tu.to@st.ueh.edu.vn"},items:[{name:"Workshop Khám Phá AI Và Web3",quantity:1,price:0}],itemCount:1,total:0,status:"processing",orderDate:"2024-10-15",shippingAddress:"B1.303"},{id:15,orderNumber:"VE-UEH-015",customer:{name:"Phan Uyên Vi",email:"vi.phan@st.ueh.edu.vn"},items:[{name:"Webinar Bản Đồ Ikigai",quantity:1,price:0}],itemCount:1,total:0,status:"pending",orderDate:"2024-12-05",shippingAddress:"Trực tuyến"},{id:16,orderNumber:"VE-UEH-016",customer:{name:"Lê Hoàng Xuân",email:"xuan.le@st.ueh.edu.vn"},items:[{name:"Lễ Tuyên Dương SV5T 2025",quantity:1,price:0}],itemCount:1,total:0,status:"delivered",orderDate:"2025-12-14",shippingAddress:"B1.302"},{id:17,orderNumber:"VE-UEH-017",customer:{name:"Trịnh Quốc Uy",email:"uy.trinh@st.ueh.edu.vn"},items:[{name:"Motivation Day - Intel-Legacy",quantity:1,price:0}],itemCount:1,total:0,status:"shipped",orderDate:"2025-09-03",shippingAddress:"Hội trường B1.302"},{id:18,orderNumber:"VE-UEH-018",customer:{name:"Nguyễn Bảo Yến",email:"yen.nguyen@st.ueh.edu.vn"},items:[{name:"Workshop Job Whisperer",quantity:1,price:0}],itemCount:1,total:0,status:"processing",orderDate:"2025-11-20",shippingAddress:"Online"},{id:19,orderNumber:"VE-UEH-019",customer:{name:"Lâm Nhật Minh",email:"minh.lam@st.ueh.edu.vn"},items:[{name:"Growth Hacking Đột Phá 2025",quantity:1,price:0}],itemCount:1,total:0,status:"cancelled",orderDate:"2024-12-12",shippingAddress:"Online"},{id:20,orderNumber:"VE-UEH-020",customer:{name:"Đoàn Gia Bảo",email:"bao.doan@st.ueh.edu.vn"},items:[{name:"Lễ Tuyên Dương Frontline 2025",quantity:1,price:0}],itemCount:1,total:0,status:"delivered",orderDate:"2025-12-05",shippingAddress:"Bình chọn trực tuyến"}]},calculateStats(){this.stats.total=this.orders.length;const t={pending:"Đang chờ",processing:"Đang xử lý",shipped:"Đã phát hành",delivered:"Đã hoàn thành",cancelled:"Đã hủy"};this.stats.pending=this.orders.filter(s=>s.status==="pending"||s.status==="Đang chờ").length,this.stats.delivered=this.orders.filter(s=>s.status==="delivered"||s.status==="Đã hoàn thành").length,this.stats.revenue=6e4;const e={};this.orders.forEach(s=>{const r=t[s.status]||s.status;e[r]=(e[r]||0)+1}),this.statusStats=Object.entries(e).map(([s,r])=>({name:s,count:r,percentage:Math.round(r/this.orders.length*100),color:this.getStatusColor(s)}))},getStatusColor(t){const e={pending:"#ffc107","Đang chờ":"#ffc107",processing:"#0d6efd","Đang xử lý":"#0d6efd",shipped:"#17a2b8","Đã phát hành":"#17a2b8",delivered:"#28a745","Đã hoàn thành":"#28a745",cancelled:"#dc3545","Đã hủy":"#dc3545"};return e[t]||e[t?.toLowerCase()]||"#6c757d"},filterOrders(){this.filteredOrders=this.orders.filter(t=>{const e=!this.searchQuery||t.orderNumber.toLowerCase().includes(this.searchQuery.toLowerCase())||t.customer.name.toLowerCase().includes(this.searchQuery.toLowerCase())||t.customer.email.toLowerCase().includes(this.searchQuery.toLowerCase()),s=!this.statusFilter||t.status===this.statusFilter,r=!this.dateFilter||this.matchesDateFilter(t.orderDate);return e&&s&&r}),this.sortOrders(),this.currentPage=1},matchesDateFilter(t){const e=new Date,s=new Date(t);switch(this.dateFilter){case"today":return s.toDateString()===e.toDateString();case"week":const r=new Date(e.getTime()-10080*60*1e3);return s>=r;case"month":const n=new Date(e.getTime()-720*60*60*1e3);return s>=n;default:return!0}},sortOrders(){this.filteredOrders.sort((t,e)=>{let s=t[this.sortField],r=e[this.sortField];return this.sortField==="total"?(s=parseFloat(s),r=parseFloat(r)):this.sortField==="orderDate"?(s=new Date(s),r=new Date(r)):(s=s.toString().toLowerCase(),r=r.toString().toLowerCase()),this.sortDirection==="asc"?s<r?-1:s>r?1:0:s>r?-1:s<r?1:0})},sortBy(t){this.sortField===t?this.sortDirection=this.sortDirection==="asc"?"desc":"asc":(this.sortField=t,this.sortDirection="asc"),this.filterOrders()},toggleAll(t){t?this.selectedOrders=this.paginatedOrders.map(e=>e.id):this.selectedOrders=[]},bulkAction(t){if(this.selectedOrders.length===0)return;const e=this.orders.filter(s=>this.selectedOrders.includes(s.id));switch(t){case"Đang xử lý":e.forEach(s=>{s.status==="Đang chờ"&&(s.status="Đang xử lý")}),this.showNotification("Đã chuyển trạng thái sang: Đang xử lý!","success");break;case"Đã phát hành":e.forEach(s=>{s.status==="Đang xử lý"&&(s.status="Đã phát hành")}),this.showNotification("Đã chuyển trạng thái sang: Đã phát hành!","success");break;case"Đã hoàn thành":e.forEach(s=>{s.status==="Đã phát hành"&&(s.status="Đã hoàn thành")}),this.showNotification("Đã chuyển trạng thái sang: Đã hoàn thành!","success");break}this.selectedOrders=[],this.calculateStats()},viewOrder(t){console.log("View order:",t),this.showNotification("Order details would open here","info")},trackOrder(t){console.log("Track order:",t),this.showNotification("Order tracking would open here","info")},printInvoice(t){console.log("Print invoice for order:",t),this.showNotification("Invoice would be generated and printed","info")},cancelOrder(t){confirm(`Are you sure you want to cancel order ${t.orderNumber}?`)&&(t.status="cancelled",this.calculateStats(),this.showNotification("Order cancelled successfully!","success"))},exportOrders(){const t=`data:text/csv;charset=utf-8,Order Number,Customer,Email,Items,Total,Status,Date
`+this.filteredOrders.map(r=>`"${r.orderNumber}","${r.customer.name}","${r.customer.email}","${r.itemCount}","${r.total}","${r.status}","${r.orderDate}"`).join(`
`),e=encodeURI(t),s=document.createElement("a");s.setAttribute("href",e),s.setAttribute("download","orders.csv"),document.body.appendChild(s),s.click(),document.body.removeChild(s),this.showNotification("Orders exported successfully!","success")},showNotification(t,e="info"){typeof Swal<"u"?Swal.fire({title:t,icon:e==="success"?"success":e==="error"?"error":"info",toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3}):alert(t)},initCharts(){this.chartsInitialized||(this.initOrderTrendsChart(),this.initStatusChart(),this.chartsInitialized=!0)},initOrderTrendsChart(){const t=document.getElementById("orderTrendsChart");if(!t){console.warn("Không tìm thấy phần tử biểu đồ xu hướng");return}t.innerHTML="";try{const e={series:[{name:"Số lượng vé",data:[12,19,15,27,24,32,28]},{name:"Doanh thu",data:[1200,1900,1500,2700,2400,3200,2800]}],chart:{type:"area",height:300,toolbar:{show:!1}},colors:["#6366f1","#10b981"],fill:{type:"gradient",gradient:{shadeIntensity:1,opacityFrom:.7,opacityTo:.3}},stroke:{curve:"smooth",width:2},xaxis:{categories:["Thứ 2","Thứ 3","Thứ 4","Thứ 5","Thứ 6","Thứ 7","Chủ nhật"]},yaxis:[{title:{text:"Số lượng vé"}},{opposite:!0,title:{text:"Doanh thu (VNĐ)"}}],tooltip:{y:[{formatter:function(r){return r+" vé"}},{formatter:function(r){return r.toLocaleString("vi-VN")+" VNĐ"}}]}};new ApexCharts(t,e).render()}catch(e){console.error("Lỗi khi vẽ biểu đồ xu hướng đơn vé:",e)}},initStatusChart(){const t=document.getElementById("statusChart");if(!t){console.warn("Không tìm thấy phần tử biểu đồ trạng thái");return}t.innerHTML="";try{const e={series:this.statusStats.map(r=>r.count),chart:{type:"donut",height:200},labels:this.statusStats.map(r=>({delivered:"Đã hoàn thành",pending:"Đang chờ",processing:"Đang xử lý",shipped:"Đã phát hành",cancelled:"Đã hủy"})[r.name.toLowerCase()]||r.name),colors:this.statusStats.map(r=>r.color),plotOptions:{pie:{donut:{size:"70%",labels:{show:!0,total:{show:!0,label:"Tổng cộng",formatter:()=>this.stats.total}}}}},legend:{show:!1},tooltip:{y:{formatter:function(r){return r+" vé"}}}};new ApexCharts(t,e).render()}catch(e){console.error("Lỗi khi hiển thị biểu đồ trạng thái:",e)}},get paginatedOrders(){const t=(this.currentPage-1)*this.itemsPerPage,e=t+this.itemsPerPage;return this.filteredOrders.slice(t,e)},get totalPages(){return Math.ceil(this.filteredOrders.length/this.itemsPerPage)},get visiblePages(){if(this.totalPages<=1)return[1];const t=[];if(t.push(1),this.totalPages<=7)for(let e=2;e<=this.totalPages;e++)t.push(e);else if(this.currentPage<=4){for(let e=2;e<=5;e++)t.push(e);t.push("..."),t.push(this.totalPages)}else if(this.currentPage>=this.totalPages-3){t.push("...");for(let e=this.totalPages-4;e<=this.totalPages;e++)t.push(e)}else{t.push("...");for(let e=this.currentPage-1;e<=this.currentPage+1;e++)t.push(e);t.push("..."),t.push(this.totalPages)}return t},goToPage(t){t>=1&&t<=this.totalPages&&(this.currentPage=t)}})),i.data("searchComponent",()=>({query:"",results:[],search(){console.log("Searching for:",this.query),this.results=[]}})),i.data("themeSwitch",()=>({currentTheme:"light",init(){this.currentTheme=localStorage.getItem("theme")||"light",document.documentElement.setAttribute("data-bs-theme",this.currentTheme)},toggle(){this.currentTheme=this.currentTheme==="light"?"dark":"light",document.documentElement.setAttribute("data-bs-theme",this.currentTheme),localStorage.setItem("theme",this.currentTheme)}}))});
